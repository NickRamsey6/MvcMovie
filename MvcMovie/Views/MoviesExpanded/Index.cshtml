@using Kendo.Mvc.UI;
@model MvcMovie.Models.MovieGenreViewModel

<h2>Movies!</h2>
@(
Html.Kendo().Grid<MvcMovie.Models.Movie>()
        .Name("grid")
        .Columns(columns =>
        {
            columns.Bound(c => c.Title);
            columns.Bound(c => c.ReleaseDate);
            columns.Bound(c => c.Genre);
            columns.Bound(c => c.Price);
            columns.Bound(c => c.Rating);
        })
        .ClientDetailTemplateId("client-template")
        .DataSource(dataSource => dataSource
            .Ajax()
            .PageSize(20)
            .Read(read => read.Action("DetailTemplate_HierarchyBinding_Movies", "MoviesExpanded"))
            .Model(m =>
            {
                m.Id(id => id.MovieId);
                m.Field(f => f.MovieId).Editable(false);
            })
            )
        .Events(events => events.DataBound("dataBound"))
    )

<script id="client-template" type="text/x-kendo-template">
    @(
        Html.Kendo().Grid<MvcMovie.Models.Actor>()
            .Name("grid_#=MovieId#")
            .Columns(columns =>
            {
                columns.Bound(actor => actor.FName);
                    columns.Bound(actor => actor.LName);
            })
            .DataSource(datasource =>
                        datasource.Ajax().Read(read => read.Action("DetailTemplate_HierarchyBinding_Actors", "MoviesExpanded", new {movieId = "#=MovieId#" })))
            .ToClientTemplate()
    )
        
</script>
<script>
    function dataBound() {
        this.expandRow(this.tbody.find("tr.k-master-row").first());
    }
</script>
<style>
    .k-detail-cell .k-tabstrip .demo-section {
        padding: 0.2em;
    }

    .movie-details ul {
        list-style: none;
        font-style: italic;
        margin: 15px;
        padding: 0;
    }

        .movie-details ul li {
            margin: 0;
            line-height: 1.7em;
        }

    .movie-details label {
        display: inline-block;
        width: 90px;
        padding-right: 10px;
        text-align: right;
        font-style: normal;
        font-weight: bold;
    }
</style>

